{"ast":null,"code":"import * as Yup from \"yup\";\nimport { createNewCategoryService, getCategoriesService, updateCategoryService } from \"../../services/CRUD_categoryService\";\nimport swal from \"sweetalert\";\nimport { ConvertDataToFormData } from \"../general_compo/utils/ConvertDataToFormData\";\nexport const handleGetParentsCategories = async setParents => {\n  try {\n    const res = await getCategoriesService();\n    if (res.status == 200) {\n      const allParents = res.data.data;\n      setParents(allParents.map(d => ({\n        id: d.id,\n        value: d.title\n      })));\n    }\n  } catch {}\n};\n\n//====================== 📍initialValues =====================\nexport const initialValues = {\n  title: \"\",\n  descriptions: \"\",\n  parent_id: \"\",\n  is_active: false,\n  show_in_menu: true,\n  addFile: \"\"\n};\n\n//====================== 📍onSubmit ===========================\n\nexport const onSubmit = async (values, actions, categoryId, formik) => {\n  if (categoryId) {\n    values = {\n      ...values,\n      is_active: values.is_active ? 1 : 0,\n      show_in_menu: values.show_in_menu ? 1 : 0\n    };\n    const res = await updateCategoryService(values, categoryId);\n    if (res.status == 200) {\n      swal(\"رکورد ثبت شد\", res.data.message, \"success\");\n    }\n  } else {\n    values = {\n      ...values,\n      is_active: values.is_active ? 1 : 0,\n      show_in_menu: values.show_in_menu ? 1 : 0\n    };\n    const convertValue = values.addFile ? ConvertDataToFormData(values) : values;\n    const res = await createNewCategoryService(convertValue);\n    if (res.status == 201) {\n      console.log(values);\n      swal(\"رکورد ثبت شد\", res.data.message, \"success\");\n      actions.resetForm();\n    } else {}\n  }\n};\n\n//====================== 📍validationSchema ===================\nexport const validationSchema = Yup.object({\n  parent_id: Yup.number(),\n  title: Yup.string().required(\"لطفا این قسمت را پر کنید\").matches(/^[\\u0600-\\u06FF\\sa-zA-Z0-9@!%$?&]+$/, \"فقط از حروف و اعداد استفاده شود\"),\n  descriptions: Yup.string().matches(/^[\\u0600-\\u06FF\\sa-zA-Z0-9@!%$?&]+$/, \"فقط از حروف و اعداد استفاده شود\"),\n  // image: Yup.mixed()\n  //   .test(\"filesize\", \"حجم فایل نمیتواند بیشتر 500 کیلوبایت باشد\", (value) =>\n  //     !value ? true : value.size <= 500 * 1024\n  //   )\n  //   .test(\"format\", \"فرمت فایل باید jpg باشد\", (value) =>\n  //     !value ? true : value.type === \"image/jpeg\"\n  //   ),\n\n  is_active: Yup.boolean(),\n  show_in_menu: Yup.boolean()\n});","map":{"version":3,"names":["Yup","createNewCategoryService","getCategoriesService","updateCategoryService","swal","ConvertDataToFormData","handleGetParentsCategories","setParents","res","status","allParents","data","map","d","id","value","title","initialValues","descriptions","parent_id","is_active","show_in_menu","addFile","onSubmit","values","actions","categoryId","formik","message","convertValue","console","log","resetForm","validationSchema","object","number","string","required","matches","boolean"],"sources":["C:/Users/f.alizadeh/Desktop/alizadeh/admin_panel/src/components/formik/FormikHelper_AddItems.jsx"],"sourcesContent":["import * as Yup from \"yup\";\r\nimport {\r\n  createNewCategoryService,\r\n  getCategoriesService,\r\n  updateCategoryService,\r\n} from \"../../services/CRUD_categoryService\";\r\nimport swal from \"sweetalert\";\r\nimport { ConvertDataToFormData } from \"../general_compo/utils/ConvertDataToFormData\";\r\n\r\nexport const handleGetParentsCategories = async (setParents) => {\r\n  try {\r\n    const res = await getCategoriesService();\r\n    if (res.status == 200) {\r\n      const allParents = res.data.data;\r\n      setParents(allParents.map((d) => ({ id: d.id, value: d.title })));\r\n    }\r\n  } catch {}\r\n};\r\n\r\n//====================== 📍initialValues =====================\r\nexport const initialValues = {\r\n  title: \"\",\r\n  descriptions: \"\",\r\n  parent_id: \"\",\r\n  is_active: false,\r\n  show_in_menu: true,\r\n  addFile: \"\",\r\n};\r\n\r\n//====================== 📍onSubmit ===========================\r\n\r\nexport const onSubmit = async (values, actions, categoryId, formik) => {\r\n  if (categoryId) {\r\n    values = {\r\n      ...values,\r\n      is_active: values.is_active ? 1 : 0,\r\n      show_in_menu: values.show_in_menu ? 1 : 0,\r\n    };\r\n    const res = await updateCategoryService(values, categoryId);\r\n    if (res.status == 200) {\r\n      swal(\"رکورد ثبت شد\", res.data.message, \"success\");\r\n    }\r\n  } else {\r\n    values = {\r\n      ...values,\r\n      is_active: values.is_active ? 1 : 0,\r\n      show_in_menu: values.show_in_menu ? 1 : 0,\r\n    };\r\n\r\n    const convertValue = values.addFile ? ConvertDataToFormData(values) : values;\r\n    const res = await createNewCategoryService(convertValue);\r\n    if (res.status == 201) {\r\n      console.log(values);\r\n      swal(\"رکورد ثبت شد\", res.data.message, \"success\");\r\n      actions.resetForm();\r\n    } else {\r\n    }\r\n  }\r\n};\r\n\r\n//====================== 📍validationSchema ===================\r\nexport const validationSchema = Yup.object({\r\n  parent_id: Yup.number(),\r\n\r\n  title: Yup.string()\r\n    .required(\"لطفا این قسمت را پر کنید\")\r\n    .matches(\r\n      /^[\\u0600-\\u06FF\\sa-zA-Z0-9@!%$?&]+$/,\r\n      \"فقط از حروف و اعداد استفاده شود\"\r\n    ),\r\n\r\n  descriptions: Yup.string().matches(\r\n    /^[\\u0600-\\u06FF\\sa-zA-Z0-9@!%$?&]+$/,\r\n    \"فقط از حروف و اعداد استفاده شود\"\r\n  ),\r\n\r\n  // image: Yup.mixed()\r\n  //   .test(\"filesize\", \"حجم فایل نمیتواند بیشتر 500 کیلوبایت باشد\", (value) =>\r\n  //     !value ? true : value.size <= 500 * 1024\r\n  //   )\r\n  //   .test(\"format\", \"فرمت فایل باید jpg باشد\", (value) =>\r\n  //     !value ? true : value.type === \"image/jpeg\"\r\n  //   ),\r\n\r\n  is_active: Yup.boolean(),\r\n  show_in_menu: Yup.boolean(),\r\n});\r\n"],"mappings":"AAAA,OAAO,KAAKA,GAAG,MAAM,KAAK;AAC1B,SACEC,wBAAwB,EACxBC,oBAAoB,EACpBC,qBAAqB,QAChB,qCAAqC;AAC5C,OAAOC,IAAI,MAAM,YAAY;AAC7B,SAASC,qBAAqB,QAAQ,8CAA8C;AAEpF,OAAO,MAAMC,0BAA0B,GAAG,MAAOC,UAAU,IAAK;EAC9D,IAAI;IACF,MAAMC,GAAG,GAAG,MAAMN,oBAAoB,CAAC,CAAC;IACxC,IAAIM,GAAG,CAACC,MAAM,IAAI,GAAG,EAAE;MACrB,MAAMC,UAAU,GAAGF,GAAG,CAACG,IAAI,CAACA,IAAI;MAChCJ,UAAU,CAACG,UAAU,CAACE,GAAG,CAAEC,CAAC,KAAM;QAAEC,EAAE,EAAED,CAAC,CAACC,EAAE;QAAEC,KAAK,EAAEF,CAAC,CAACG;MAAM,CAAC,CAAC,CAAC,CAAC;IACnE;EACF,CAAC,CAAC,MAAM,CAAC;AACX,CAAC;;AAED;AACA,OAAO,MAAMC,aAAa,GAAG;EAC3BD,KAAK,EAAE,EAAE;EACTE,YAAY,EAAE,EAAE;EAChBC,SAAS,EAAE,EAAE;EACbC,SAAS,EAAE,KAAK;EAChBC,YAAY,EAAE,IAAI;EAClBC,OAAO,EAAE;AACX,CAAC;;AAED;;AAEA,OAAO,MAAMC,QAAQ,GAAG,MAAAA,CAAOC,MAAM,EAAEC,OAAO,EAAEC,UAAU,EAAEC,MAAM,KAAK;EACrE,IAAID,UAAU,EAAE;IACdF,MAAM,GAAG;MACP,GAAGA,MAAM;MACTJ,SAAS,EAAEI,MAAM,CAACJ,SAAS,GAAG,CAAC,GAAG,CAAC;MACnCC,YAAY,EAAEG,MAAM,CAACH,YAAY,GAAG,CAAC,GAAG;IAC1C,CAAC;IACD,MAAMb,GAAG,GAAG,MAAML,qBAAqB,CAACqB,MAAM,EAAEE,UAAU,CAAC;IAC3D,IAAIlB,GAAG,CAACC,MAAM,IAAI,GAAG,EAAE;MACrBL,IAAI,CAAC,cAAc,EAAEI,GAAG,CAACG,IAAI,CAACiB,OAAO,EAAE,SAAS,CAAC;IACnD;EACF,CAAC,MAAM;IACLJ,MAAM,GAAG;MACP,GAAGA,MAAM;MACTJ,SAAS,EAAEI,MAAM,CAACJ,SAAS,GAAG,CAAC,GAAG,CAAC;MACnCC,YAAY,EAAEG,MAAM,CAACH,YAAY,GAAG,CAAC,GAAG;IAC1C,CAAC;IAED,MAAMQ,YAAY,GAAGL,MAAM,CAACF,OAAO,GAAGjB,qBAAqB,CAACmB,MAAM,CAAC,GAAGA,MAAM;IAC5E,MAAMhB,GAAG,GAAG,MAAMP,wBAAwB,CAAC4B,YAAY,CAAC;IACxD,IAAIrB,GAAG,CAACC,MAAM,IAAI,GAAG,EAAE;MACrBqB,OAAO,CAACC,GAAG,CAACP,MAAM,CAAC;MACnBpB,IAAI,CAAC,cAAc,EAAEI,GAAG,CAACG,IAAI,CAACiB,OAAO,EAAE,SAAS,CAAC;MACjDH,OAAO,CAACO,SAAS,CAAC,CAAC;IACrB,CAAC,MAAM,CACP;EACF;AACF,CAAC;;AAED;AACA,OAAO,MAAMC,gBAAgB,GAAGjC,GAAG,CAACkC,MAAM,CAAC;EACzCf,SAAS,EAAEnB,GAAG,CAACmC,MAAM,CAAC,CAAC;EAEvBnB,KAAK,EAAEhB,GAAG,CAACoC,MAAM,CAAC,CAAC,CAChBC,QAAQ,CAAC,0BAA0B,CAAC,CACpCC,OAAO,CACN,qCAAqC,EACrC,iCACF,CAAC;EAEHpB,YAAY,EAAElB,GAAG,CAACoC,MAAM,CAAC,CAAC,CAACE,OAAO,CAChC,qCAAqC,EACrC,iCACF,CAAC;EAED;EACA;EACA;EACA;EACA;EACA;EACA;;EAEAlB,SAAS,EAAEpB,GAAG,CAACuC,OAAO,CAAC,CAAC;EACxBlB,YAAY,EAAErB,GAAG,CAACuC,OAAO,CAAC;AAC5B,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}